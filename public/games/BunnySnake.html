<!DOCTYPE html>
<!--[if lte IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Wonders of the Unusual Magical Machine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--
Made in Twine 1.4.2 (running on Darwin 13.4.0)
Built on 01 Nov 2014 at 10:26:23, -0600

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<script title="engine">
(function(){

function clone(a){var constructor,b,proto;if(!a||typeof a!="object"){return a
}constructor=a.constructor;if(constructor==Date||constructor==RegExp){b=new constructor(a)}else{if(constructor==Array){b=[]}else{if(a.nodeType&&typeof a.cloneNode=="function"){b=a.cloneNode(true)}else{proto=(typeof Object.getPrototypeOf=="function"?Object.getPrototypeOf(a):a.__proto__);b=proto?Object.create(proto):{}}}}for(var property in a){if(Object.prototype.hasOwnProperty.call(a,property)&&!isCyclic(a[property])){if(typeof a[property]=="object"){try{b[property]=clone(a[property]);continue}catch(e){}}b[property]=a[property]}}return b}function isCyclic(obj){var properties=[];return(function recurse(obj){var key,i,ownProps=[];if(obj&&typeof obj=="object"){if(properties.indexOf(obj)>-1){return true
}properties.push(obj);for(key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&recurse(obj[key])){return true
}}}return false}(obj))}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function addClickHandler(el,fn){if(el.addEventListener){el.addEventListener("click",fn)}else{if(el.attachEvent){el.attachEvent("onclick",fn)}}}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}var scrollWindowInterval;function scrollWindowTo(e,margin){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight,g=k(e),j=(d>g)?-1:1,b=0,c=Math.abs(d-g);scrollWindowInterval&&window.clearInterval(scrollWindowInterval);if(c){scrollWindowInterval=window.setInterval(h,25)}function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o),h=o.offsetHeight,n=d+m;p=Math.min(Math.max(p+(margin||0)*(p<d?-1:1),0),n);if(p<d){return p
}else{if(p+h>n){if(h<m){return(p-(m-h)+20)}else{return p
}}else{return p
}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function decompile(val){var i,ret;if((typeof val!="object"&&typeof val!="function")||!val){return val
}else{if(val instanceof Passage){return{"[[Passage]]":val.id}}else{if(Array.isArray(val)){ret=[]}else{ret={}}}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)&&!isCyclic(val[i])){ret[i]=decompile(val[i])}}if(typeof val=="function"||val instanceof RegExp){try{internalEval(val+"");ret["[[Call]]"]=val+""}catch(e){ret["[[Call]]"]="function(){}"}}return ret}function recompile(val){var i,ret=val;if(val&&typeof val=="object"){if(typeof val["[[Passage]]"]=="number"){return tale.get(val["[[Passage]]"])}if(typeof val["[[Call]]"]=="string"){try{ret=internalEval(val["[[Call]]"])}catch(e){}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)){ret[i]=recompile(val[i])}}}return ret}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var temp="",imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");text=text.replace(/@import\s+(?:url\s*\(\s*['"]?|['"])[^"'\s]+(?:['"]?\s*\)|['"])\s*([\w\s\(\)\d\:,\-]*);/g,function(e){temp+=e;return""});text=temp+text;return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}else{alert("Regrettably, this "+tale.identity()+"'s code just ran into a problem:\n"+b+".\n"+softErrorMessage)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};function rot13(s){return s.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt()+13)?c:c-26)})}Object.create||(function(){var F=function(){};Object.create=function(o){if(typeof o!="object"){throw TypeError()}F.prototype=o;return new F()}})();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});Array.isArray||(Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"});Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c
}}return -1});Array.prototype.forEach||(Array.prototype.forEach=function(fun){if(this==null){throw TypeError()}var t=Object(this);var len=+t.length;if(typeof fun!="function"){throw TypeError()}var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){fun.call(thisArg,t[i],i,t)}}});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1
}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+"";this.hash=""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(val){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(decompile(val)))))}catch(e){return"0"
}}if(!hist.passage||hist.passage.id==null){return""
}ret+=hist.passage.id.toString(36);if(noVars){return ret
}for(vars in d){type=typeof d[vars];if(type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return recompile(JSON.parse(decodeURIComponent(escape(window.atob(str)))))}catch(e){return 0
}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false
}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break
}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(!window.location.hash||(window.location.hash=="#")){if(testplay){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display(testplay,null,"quietly");return true}return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=History.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false
}};History.prototype.saveVariables=function(c,el,callback){if(typeof callback=="function"){callback.call(el)}this.history.unshift({passage:c,variables:clone(this.history[0].variables)})};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){(typeof this.pushState=="function")&&this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:2,revision:0,date:new Date("2014"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=parser.fullMatch().replace(/^\S*|>>$/g,"").readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=internalEval(Wikifier.parse(params[j]))}}catch(e){throwError(place,parser.fullMatch()+" bad argument: "+params[j],parser.fullMatch());return}}else{try{output=internalEval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name
}}}if(!output){throwError(place,"<<"+macroName+'>>: "'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,"<<"+macroName+'>>: The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams
}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue
}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){var args=parser.fullArgs(macroName!="print"),output;try{output=internalEval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,""+output)}}catch(e){throwError(place,"<<print>> bad expression: "+params.join(" "),parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser,c.join(" "))},run:function(a,expression,parser,original){try{return internalEval(expression)}catch(e){throwError(a,"bad expression: "+(original||expression),parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],rawConds=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,rawCond=params.join(" "),currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0,i=0;for(;i<src.length;i++){if((src.substr(i,6)=="<<else")&&!nesting){rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){rawCond=src.slice(i+9,t);currentCond=Wikifier.parse(rawCond)}else{rawCond="";currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++
}if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);break}}currentClause+=src.charAt(i)}if(endPos!=-1){parser.nextMatch=endPos;try{for(i=0;i<clauses.length;i++){if(internalEval(conditions[i])){new Wikifier(place,clauses[i]);break}}}catch(e){throwError(place,"<<"+(i?"else ":"")+"if>> bad condition: "+rawConds[i],!i?parser.fullMatch():"<<else if "+rawConds[i]+">>")}}else{throwError(place,"I can't find a matching <<endif>>",parser.fullMatch())}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs(),null,params.join(" "));if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't <<remember>> the variable $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--
}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++
}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching <<end"+macroName+">>",parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=internalEval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,parser.fullMatch()+": "+e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=internalEval(Wikifier.parse(e[0]))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;addClickHandler(el,(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b)));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc){var t;if(!this||this.constructor!=Passage){throw new ReferenceError("passage() must be in lowercase")}this.title=c;ofunc=typeof ofunc=="function"&&ofunc;if(b){this.id=a;this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){if(ofunc){this.tags=ofunc(this.tags)}this.tags=this.tags.readBracketedList()}else{this.tags=[]}t=b.firstChild?b.firstChild.nodeValue:"";if(ofunc&&!this.isImage()){this.text=ofunc(Passage.unescapeLineBreaks(t))}else{this.text=Passage.unescapeLineBreaks(t)}if(!this.isImage()){this.preloadImages()}if(/\.char\b|\[data\-char\b/.exec(this.text)&&Wikifier.charSpanFormatter){Wikifier.formatters.push(Wikifier.charSpanFormatter);delete Wikifier.charSpanFormatter}}else{this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.isImage=function(){return !!~(this.tags.indexOf("Twine.image"))};Passage.prototype.preloadImages=function(){var u="\\s*['\"]?([^\"'$]+\\.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?\\s*",k=function(c,e){var i,d;do{d=c.exec(this.text);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url\\s*\\("+u+"\\)","mig"),1).call(this,new RegExp("src\\s*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""
}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(this.isImage()){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,nsc,isImage,settings=this.storysettings={lookup:function(a,dfault){if(!(a in this)){return dfault
}return(this[a]+"")!="off"}},tiddlerTitle="";window.tale=this;this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="rot13"){for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){isImage=(c.getAttribute("tags")+"").indexOf("Twine.image")>-1;if(tiddlerTitle!="StorySettings"&&!isImage){tiddlerTitle=rot13(tiddlerTitle)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,!isImage&&rot13)
}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true
}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"
}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo",true)};Tale.prototype.identity=function(){var meta=document.querySelector("meta[name='identity']"),identity=meta?meta.getAttribute("content"):"story";return(Tale.prototype.identity=function(){return identity
})()};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return
}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="Bunny&Snake";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").setAttribute("style","");setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"};Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*)+)";Wikifier.textPrimitives.unquoted="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){if(place){insertText(place,this.source.substring(startPos,endPos))}};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=this.nextMatch-2,startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""
}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g=Wikifier.textPrimitives.unquoted;function alter(from,to){b=b.replace(new RegExp(from+g,"gim"),to);return alter}re=new RegExp(Wikifier.textPrimitives.variable+g,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1")("\\beq\\b"," == ")("\\bneq\\b"," != ")("\\bgt\\b"," > ")("\\bgte\\b"," >= ")("\\blt\\b"," < ")("\\blte\\b"," <= ")("\\band\\b"," && ")("\\bor\\b"," || ")("\\bnot\\b"," ! ")("\\bis\\b"," == ")("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead=Wikifier.styleByCharFormatter.lookahead,lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false,unDash=function(str){var s=str.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};styles.className="";do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[5]){styles.className+=lookaheadMatch[5].replace(/\./g," ")+" "}else{if(lookaheadMatch[1]){s=unDash(lookaheadMatch[1]);v=lookaheadMatch[2]}else{s=unDash(lookaheadMatch[3]);v=lookaheadMatch[4]}}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){insertElement(w.output,"pre",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true
}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",becomes:String.fromCharCode(8212),handler:function(a){insertElement(a.output,"span",null,"char",this.becomes).setAttribute("data-char","emdash")}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",handler:function(w){var newType,newLevel,t,len,bulletType,lookaheadMatch,matched,lookaheadRegExp=new RegExp(this.lookahead,"mg"),placeStack=[w.output],currType=null,currLevel=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;if(lookaheadMatch[1]){bulletType=lookaheadMatch[1].slice(-1);newType="ul"}else{if(lookaheadMatch[2]){newType="ol"
}}w.nextMatch+=newLevel;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;t=insertElement(placeStack[placeStack.length-1],"li");if(bulletType&&bulletType!="*"){t.setAttribute("data-bullet",bulletType)}w.subWikify(t,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:https?|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)
}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(code,callback){return function(){macros.set.run(null,Wikifier.parse(code),null,code);typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",importedImage:function(img,passageName){var imgPassages,imgname;try{imgname=internalEval(Wikifier.parse(passageName))}catch(e){}if(!imgname){imgname=passageName
}imgPassages=tale.lookup("tags","Twine.image");for(j=0;j<imgPassages.length;j++){if(imgPassages[j].title==imgname){img.src=imgPassages[j].text;break}}},handler:function(w){var e,img,j,lookaheadMatch,lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}this.importedImage(img,lookaheadMatch[4]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:/<<([^>\s]+)(?:\s*)((?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'|"(?:[^"\\]*\\.)*[^"\\]*"|[^'"\\>]|>(?!>))*)>>/mg,handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead);lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&typeof macro=="object"&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,'No macro or passage called "'+name+'"',w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},(Wikifier.styleByCharFormatter={name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:([^\\.:@]+):([^;\\|\\n]+);)|(?:\\.([^;\\|\\n]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}if(typeof styles.className=="string"){e.className=styles.className}}w.subWikify(e,this.terminator)}}),{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmlCharacterReference",match:"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",handler:function(w){var el=document.createElement("div");el.innerHTML=w.matchText;insertText(w.output,el.textContent)}},{name:"htmltag",match:"<(?:\\/?[\\w\\-]+|[\\w\\-]+(?:(?:\\s+[\\w\\-]+(?:\\s*=\\s*(?:\\\".*?\\\"|'.*?'|[^'\\\">\\s]+))?)+\\s*|\\s*)\\/?)>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var tmp,passage,setter,e,isvoid,isstyle,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1]&&re[1].toLowerCase();if(tn&&tn!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn)!=-1);isstyle=tn=="style"||tn=="script";lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){if(isstyle){e=document.createElement(tn);e.type="text/css";tmp=a.source.slice(a.nextMatch,lookaheadMatch.index);e.styleSheet?(e.styleSheet.cssText=tmp):(e.innerHTML=tmp);a.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}else{e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}if(setter=e.getAttribute("data-setter")){setter=Wikifier.linkFormatter.makeCallback(setter)}if(passage=e.getAttribute("data-passage")){if(tn!="img"){addClickHandler(e,Wikifier.linkFunction(Wikifier.parsePassageTitle(passage),e,setter));if(tn=="area"||tn=="a"){e.setAttribute("href","javascript:;")}}else{Wikifier.imageFormatter.importedImage(e,passage)}}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}}];Wikifier.charSpanFormatter={name:"char",match:"[^\n]",handler:function(a){insertElement(a.output,"span",null,"char",a.matchText).setAttribute("data-char",a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText)}};Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(internalEval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}addClickHandler(el,Wikifier.linkFunction(title,el,callback));if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){addClickHandler(el,callback)}if(place){place.appendChild(el)}return el};function visited(e){var ret=0,i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++
}}}return ret}function visitedTag(){var i,j,sh,ret=0,tags=Array.prototype.slice.call(arguments);if(tags.length==1&&typeof tags[0]=="string"){tags=tags.split(" ")}if(!state){return 0
}sh=state.history;for(i=0;i<sh.length&&sh[i].passage;i++){for(j=0;j<tags.length||void ret++;j++){if(sh[i].passage.tags.indexOf(tags[j])==-1){break
}}}return ret}var visitedTags=visitedTag;function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function random(a,b){var from,to;if(!b){from=0;to=a}else{from=Math.min(a,b);to=Math.max(a,b)}to+=1;return ~~((Math.random()*(to-from)))+from}function either(){if(Array.isArray(arguments[0])&&arguments.length==1){return either.apply(this,arguments[0])}return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function bookmark(){return state.hash||"#"}function internalEval(s){return eval("0,"+s)}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this "+tale.identity()+" ("+s.title+": "+e.message+")."+softErrorMessage)}}window.onbeforeunload=function(){if(tale&&tale.storysettings.lookup("exitprompt",false)&&state&&state.history.length>1){return"You are about to end this "+tale.identity()+"."}};var oldOnError=window.onerror||null,softErrorMessage="You may be able to continue playing, but some parts may not work properly.";window.onerror=function(msg,a,b,c,error){var s=(error&&(".\n\n"+error.stack.replace(/\([^\)]+\)/g,"")+"\n\n"))||(" ("+msg+").\n");alert("Sorry to interrupt, but this "+((tale&&tale.identity&&tale.identity())||"page")+"'s code has got itself in a mess"+s+softErrorMessage.slice(1));window.onerror=oldOnError;if(typeof window.onerror=="function"){window.onerror(msg,a,b,c,error)}};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)
};var imgs,scripts,macro,style,i,styleText="",passages=document.getElementById("passages");function sanityCheck(thing){var i,j,s="NOTE: The "+thing,checks={prerender:prerender,postrender:postrender,macros:macros};for(i in checks){if(Object.prototype.hasOwnProperty.call(checks,i)&&!sanityCheck[i]){if(!checks[i]||typeof checks[i]!="object"){alert(s+" seems to have corrupted the "+i+" object."+softErrorMessage);sanityCheck[i]=true;continue}if(i!="macros"){for(j in checks[i]){if(Object.prototype.hasOwnProperty.call(checks[i],j)&&typeof checks[i][j]!="function"){alert(s+" added a property '"+j+"' to "+i+", "+"which is a "+typeof checks[i][j]+", not a function."+softErrorMessage);sanityCheck[i]=true;break}}}}}if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert(s+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This "+tale.identity()+" requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This "+tale.identity()+"'s HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags.indexOf("stylesheet")==-1){continue
}if(i.tags+""=="stylesheet"){styleText+=i.text}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1){setTransitionCSS(i.text)}}}styleText=alterCSS(styleText);style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()}setTimeout(function f(){var size,bar=document.getElementById("loadingbar"),store=document.getElementById("storeArea");if(!bar){return
}if(store){size=store.getAttribute("data-size");if(store.children.length<=size&&!tale){bar.style.width=~~((store.children.length+1)/size*100)+"%"}else{bar.outerHTML="";return}}setTimeout(f,5)},5);

var hasPushState=!!window.history&&(typeof window.history.pushState=="function")&&(function(a){try{a.setItem("test","1");a.removeItem("test");return true}catch(e){return false
}}(window.sessionStorage));Tale.prototype.canBookmark=function(){return this.canUndo()&&!this.storysettings.lookup("hash")&&(this.storysettings.lookup("bookmark",true)||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var i,e,q,bookmark,hash,c=tale.get(title),p=document.getElementById("passages");if(c==null){return
}if(type!="back"){this.saveVariables(c,source,callback);hash=(tale.storysettings.lookup("hash")&&this.save())||"";if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("Twine.History"+this.id,JSON.stringify(decompile(this.history)));this.pushState(this.history.length<=2&&window.history.state=="",hash)}catch(e){alert("Your browser couldn't save the state of the "+tale.identity()+".\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}this.hash=hash||this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(i=0;i<p.childNodes.length;i+=1){q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"
})}}else{p.appendChild(e);e.style.visibility="visible"}tale.setPageElements();if(tale.canUndo()){if(!hasPushState&&type!="back"){window.location.hash=this.hash}else{if(tale.canBookmark()){bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=this.hash)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(!tale){return
}if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{addClickHandler(snapback,Interface.showSnapback)}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&addClickHandler(restart,Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this "+tale.identity()+"?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;addClickHandler(b,function(){return macros.back.onclick(true,this.pos)});b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}b=null;if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";addClickHandler(document,Interface.hideAllMenus);b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,i,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=recompile(JSON.parse(sessionStorage.getItem("Twine.History"+s.id)));if(hist){steps=hist.length-s.length}}if(steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
/* Sidebar */
#sidebar {
	position: fixed;
	list-style: none;
	width: 12em;
}
#sidebar #title, #sidebar #credits  {
	cursor: auto;
}
#sidebar #storySubtitle, #sidebar #storyMenu {
	display: block;
}
.menu {
	position: absolute;
	display: none;
	z-index: 5;
}
/* Passages container */
#passages {
	margin-left: 18.2em;
	position:relative;
}
/* Links */
.passage a {
	color: #3cac8b;
}
a.internalLink, a.externalLink, a.back, a.return, [data-passage], .menu div {
	cursor: pointer;
}
a.brokenLink {
	background-color: red;
	color: #000;
}
.marked {
	background-color: #f66;
	color: #000;
}
.marked[title] {
	cursor: help;
}
.passage li[data-bullet] {
	list-style-type: none;
}
.passage li[data-bullet]:before {
	content: attr(data-bullet);
	position: relative;
	left: -1em;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
/* HTML4 compatibility */
img {
	vertical-align:bottom;
}
@media screen and (max-width: 640px) {
	#sidebar {
		position: static;
		margin: 0 auto;
		padding: 0;
	}
	body #sidebar li  {
		text-align: center;
	}
	#passages {
		min-height: 100vh;
		margin-left: 0em;
	}
}
#loadingbar {
	position:fixed;
	top:0;
	left:0;
	border-top: solid #4d6ad8 6px;
	transition: width 0.5s;
}
</style>
<style id="defaultCSS">
body {
	background-color: #fffef8;
	color: #66584a;
	font-family: Proxima Nova,Verdana,sans-serif;
	font-size: 75%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	left: 7.5em;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Proxima Nova,Verdana,sans-serif;
	text-transform: uppercase;
}
#sidebar ul {
	padding: 0;
}
#sidebar li {
	color: #87796a;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em;
	list-style: none;
}
#sidebar li a {
	color: #c4b4a1;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover, #snapback:hover, #restart:hover {
	color: #87796a;
	cursor: pointer;
	text-decoration: none;
}
#sidebar #title {
	font-size: 120%;
}
#sidebar #title, #sidebar #title:hover, #sidebar #title a {
	color: #c0e3d9;
}
#sidebar #storySubtitle {
	font-size: 75%;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 50%;
}
#sidebar #credits:hover {
	color: #87796a;
}
#sidebar #credits a {
	text-decoration: none;
}
#passages {
	border-left: 1px solid #DDD;
	padding-left: 1.5em;
}
.menu {
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage a {
	font-weight: bold;
	text-decoration: none;
}
.passage a:hover {
	color: #20765d;
	text-decoration: underline;
}
.content > ul {
	padding-top: 1.3em;
}
.passage ul, .passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage li {
	margin-right: 6em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.marked {
	margin-right: 12px;
	padding: 3px;
}
.disabled {
	font-weight: bold;
	color: #333;
}
@media screen and (max-width: 640px) {
	body {
		margin: 5%;
	}
	#sidebar {
		width:100%;
		margin: 0;
		border-bottom: 1px solid #333;
	}
	#passages {
		padding-top: 2em;
		border-left: 0;
	}
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<div id="loadingbar"></div>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement" style="display:none"></li>
<li><a href="javascript:;" id="snapback">Rewind</a></li>
<li><a href="javascript:;" id="restart">Restart</a></li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>
#sidebar{display:none;}
</style>
</div>
<div id="storeArea" data-size="98" hidden><div tiddler="CBody" tags="" created="201410021957" modifier="twee" twine-position="2564,161">&quot;Can I see the body?&quot; you ask. &lt;&lt;if $hasPail is &quot;yes&quot;&gt;&gt;John is about to wave you away when he sees the pail in your hand. &quot;Oh,&quot; you suddenly remember, &quot;Yes, Detective Ida asked me to give you this and ask what you think.&quot;\n\n&quot;Hrrrm,&quot; he responds, taking the pail and examining it. You kneel down to peer at the body; he doesn't seem to mind.\n\nYou can now [[inspect the body.|InspectBody]]\n\n&lt;&lt;else&gt;&gt;John waves you away. &quot;Authorized personnel only,&quot; he mumbles, as he turns over something in his hands. &quot;Interesting... four legged sitting implement...hrm...&quot;\n\nYou sigh. You're probably going to need some kind of credentials to impress him.&lt;&lt;endif&gt;&gt;\n\nYou&lt;&lt;if $hasPail is &quot;yes&quot;&gt;&gt; can also&lt;&lt;endif&gt;&gt;...\n\n[[Converse with Detective Ida and Inspector General Nathan.|Conversation]]\n\n[[Wander downstream to see if you can find any clues.|DownTheRiver]]</div><div tiddler="NoLollipopPants" tags="" created="201408031629" modifier="twee" twine-position="2050,531">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasPants = &quot;no&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You refuse the pantaloons. You will not be hindered by such clothing! You were meant to be free!\n\nAndrew shrugs, tossing the pantaloons into a heap of other lollipops labeled, &quot;For Pantsless Travelers.&quot;\n\n&quot;Have you seen &lt;&lt;print $partnerName&gt;&gt;?&quot; you start to ask before he waves you away, chocolate dripping from his fingers.\n\n&quot;Yes, yes, I've seen her,&quot; he sighs.\n\n&quot;Where?!&quot; you ask desperately.\n\n&quot;Well...it's more of a problem of not where, but how to get to her.&quot;\n\nAndrew [[gestures to the plane|WhatPlane]].</div><div tiddler="TheDetective" tags="" created="201409131409" modifier="twee" twine-position="2243,15">Almost as if on cue, two people both masked in the dim, hazy night stride up to Inspector General Nathan. One of them is a mysterious black-haired man clad in a trenchcoat. The other is a bright-eyed woman who is appraising the two of you silently.\n\nThey too, look familiar...\n\n&quot;Sorry Inspector, but we couldn't take any cabs here,&quot; the man explains. &quot;They turned into into well-oiled stomach muscles.&quot;\n\n&quot;Sexy but puzzling!&quot; the woman exclaims, jumping down from the horse. &quot;Allow me to introduce myself. I am the great Detective Ida Holmes! And this is my associate, Doctor John Watson. And you must be &lt;&lt;print $playerName&gt;&gt;.&quot;\n\nYou thought you recognized her! You give Ida and John a hug, to which they seem confused, but pleased.\n\n&quot;Hi &lt;&lt;print $playerName&gt;&gt;!&quot; John waves amicably to you.\n\n&quot;Now, don't wave at him like that, &lt;&lt;print $playerName&gt;&gt;'s a stone-cold killer!&quot; Nathan exclaims.\n\nWait...what? No! You didn't kill anyone. Your friends aren't acting normally...\n\n[[&quot;Wait, wait, this is all a misunderstanding...&quot;|Misunderstanding]]</div><div tiddler="AccuseMar" tags="" created="201410022108" modifier="twee" twine-position="3715,501">&quot;Mar!&quot; you point a finger towards the wobbling ghost and he sighs, holding out his hands.\n\n&quot;Hmmm,&quot; Ida muses, &quot;that's not exactly what I was expecting.\n\n&quot;Well, he did say he was guilty,&quot; you reply, though your tone of voice is less sure than before.\n\n&quot;But he sure does look suspicious,&quot; Inspector General Nathan reasons. &quot;I mean, look at that outfit! How is anyone supposed to believe he's a ghost?!&quot;\n\nYou have a feeling that the outfit isn't exactly for fun.\n\n&quot;Are you sure?&quot; Detective Ida asks.\n\n[[&quot;Yes, I'm sure.&quot;|MarBadEnd]]\n\n[[&quot;I need to rethink this.&quot;|Rethink]]</div><div tiddler="DeadCIntro" tags="" created="201407061706" modifier="twee" twine-position="1903,10">&lt;&lt;silently&gt;&gt;&lt;&lt;set $dessertPlane = &quot;no&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You press the ENGAGE button, and the transmogrifier crackles and sparks. You start to feel a tingly sensation weaving its way up your arms. The scenery of your lab begins to melt away.\n\nBefore you can check your skin for vagrant spiders, you hear the remote chime.\n\n&quot;Now arriving at the Dead Sea.&quot;\n\nYou look up.\n\nInstead of a body of water, you find that you are... standing in front of a body. It is cloaked in a crimson cap and is wearing a crumpled cardigan. It's damp from the river bed that is running beside it.\n\nYou narrow your eyes as you look closer at the pile of clothes in front of you.\n\nMaybe it's a body?\n\nYou walk around it, staring at it intently. It doesn't have legs or arms...or eyes. The spine is bent in a...\n\nWait.\n\nNo, that would be too weird.\n\n[[Wouldn't it?|HeyYou]]</div><div tiddler="EndDessertPlane" tags="" created="201409141258" modifier="twee" twine-position="2029,318">&quot;Ready?&quot; you ask Andrew, who is putting on aviator goggles made of Lifesavers. He pats your back and hops down into the seat, turning the peppermint dial carefully.\n\n&quot;Let's go!&quot; he shouts. You think you can hear the relief in his voice. You wonder how long he's been trapped here.\n\nAs you sit into the co-pilot's chair, you feel something hard beneath you. Ouch. Upon inspection, it looks like a blue turquoise.\n\n&quot;Is this yours?&quot; you ask Andrew, to which he shakes his head. \n\n&quot;Oh no, you can keep it.&quot;\n\nYou smile and pocket the turquoise, admiring its beauty. It looks just like the sky outside...\n\nThe plane rises from the dessert plain and takes off, leaving a cloud of powdered sugar in its wake. Andrew [[mutters something into his mouthpiece|AndrewMutters]].</div><div tiddler="InspectCandy" tags="" created="201410042215" modifier="twee" twine-position="2393,199">In its clutched hand, you find some candies. They are yellow, plum, and bright blue. Was the C eating them before it was murdered? Or something perhaps more sinister...\n\nYou...\n\n[[Go back to conversing with Nathan and Ida.|Conversation]]\n\n[[Go down the river to find clues.|DownTheRiver]]</div><div tiddler="LookAtCakepit" tags="" created="201408142040" modifier="twee" twine-position="1724,1301">&lt;&lt;if $fixedCakepit is &quot;yes&quot;&gt;&gt;You climb up the cake pop ladder leading to the plane and take a look inside the cakepit. There are multiple dials and levers, each made out of various candies and mints.\n\nThe peppermint dial is now in its rightful place, and you can see that it is lit up. &lt;&lt;if $icedPlane is &quot;yes&quot;&gt;&gt;Now that the plane is iced and the cakepit fixed, it looks like you can [[take off|EndDessertPlane]].&lt;&lt;endif&gt;&gt; &lt;&lt;else&gt;&gt;You climb up the cake pop ladder leading to the plane and take a look inside the cakepit. There are multiple dials and levers, each made out of various candies and mints.\n\n&lt;&lt;if $hasPeppermints is &quot;yes&quot;&gt;&gt;\nYou notice that the peppermint in your pack looks a lot like the peppermint dials in the plane... one is missing. Do you want to [[fix the dial|CakepitRestored]]?\n&lt;&lt;else&gt;&gt;\nYou notice that one of the peppermint dials of the plane is missing.\n&lt;&lt;endif&gt;&gt;\n\n&quot;I've been trying to fix the wiring for ages,&quot; Andrew laments.&lt;&lt;endif&gt;&gt;\n\nYou...\n\n[[Return to the outside of the plane.|OuterPlane]]\n\n[[Go to the chocolate river.|ChocoRiver]]\n\n[[Take a look at the bubbling cream spring.|CreamSpring]]</div><div tiddler="WhoIs" tags="" created="201407282225" modifier="twee" twine-position="177,32">&lt;&lt;set $partnerName = prompt(&quot;What is your girlfriend's name?&quot;,&quot;Chelsea&quot;)&gt;&gt;\n&quot;&lt;&lt;print $playerName&gt;&gt;! It's wake time!&quot;\n\n[[Hoo boy.|WakeTime]]</div><div tiddler="ChocoRiver" tags="" created="201408142058" modifier="twee" twine-position="2102,1530">You decide that the chocolate river looks like a good place to go, and ask Andrew to guide you to the river.\n\nAfter a succinct adjustment of his truffle tie, he agrees and shows you to the river.\n\nFarther away, the river seemed to be one continguous strip of chocolate, but now that you are closer you can see the chunks of dark chocolate floating downriver. Some sugar gulls stand in the river, their sugary feathers soaked with chocolate as they dip their bills into the stream.\n\nAndrew dips his hand into the river and fishes out a chunk of dark chocolate, nibbling on it. He wrinkles his nose.\n\n&quot;I forgot this was baking chocolate.&quot;\n\nYou...\n\n[[dip your hand into the river to get some baking chocolate.|GetChocolate]]\nor\n[[talk to Andrew.|TalktoAndrew]]\n&lt;&lt;if $hasChocolate is &quot;yes&quot;&gt;&gt;or\n[[admire the sugar gulls.|AdmireGulls]]&lt;&lt;endif&gt;&gt;\nor\n[[return to the plane.|OuterPlane]]</div><div tiddler=" HeyYou" tags="" created="201407111730" modifier="twee" twine-position="2272,479">You're interrupted by a loud, booming voice.\n\n&quot;Hey &lt;&lt;print $playerName&gt;&gt;!&quot; it yells, &quot;That's my plane! Stop it!&quot;\n\nYou pull your face away to see an angry Frenchman covered in chocolate.\n\nHe tells you his name is Andrew, and he is the owner of this plane. You would do well not to continue licking it. He looks a lot like someone you know...\n\nHe adjusts his dark chocolate truffle tie.\n&lt;&lt;if $hasPants is &quot;no&quot;&gt;&gt;\n&quot;And why don't you have any pants, &lt;&lt;print $playerName&gt;&gt;?&quot;\n\nYou look down and realize that yes, you are still naked.\n\nAndrew extends his hand. In it is a pair of lollipop pantaloons.\n\n[[You take the pantaloons.|LollipopPants]]\n[[You refuse the pantaloons.|NoLollipopPants]]\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $hasPants is &quot;yes&quot;&gt;&gt;\n&quot;Have you seen &lt;&lt;print $partnerName&gt;&gt;?&quot; you start to ask before he waves you away, chocolate dripping from his fingers.\n\n&quot;Yes, yes, I've seen her,&quot; he sighs.\n\n&quot;Where?!&quot; you ask desperately.\n\n&quot;Well...it's less of a problem of where, and more how to get to her.&quot;\n\nAndrew [[gestures to the plane|WhatPlane]].\n&lt;&lt;endif&gt;&gt;</div><div tiddler="Peppermints" tags="" created="201409131329" modifier="twee" twine-position="1748,1736">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasPeppermints = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;These peppermints look like they may be good for something... you swat away some of the chocolate frogs to grab a peppermint floating in the water.\n\nYou could have sworn that you saw similar peppermints somewhere before...\n\nIt comes off easily in your hands, and you place it in your pack.\n\nNow...\n\n&lt;&lt;if $hasSugar is &quot;yes&quot;&gt;&gt;[[Scoop up some fresh cream.|freshCream]]&lt;&lt;endif&gt;&gt;\n\n[[Eat a chocolate frog.|chocoFrog]]\n\n[[Return to the plane.|OuterPlane]]</div><div tiddler="DontBringPants" tags="" created="201407011726" modifier="twee" twine-position="906,10">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $hasPants = &quot;no&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;Screw pants, you're going to go naked adventuring!\n\nWhen you tell &lt;&lt;print $partnerName&gt;&gt; that you're going to go in the buff, she laughs. And when she realizes you're serious, she shrugs.\n\n&quot;Okay,&quot; she laughs. &quot;Are you ready to go?&quot; she asks, and hold out her hand.\n\nYou [[take her hand|ReadyToGo]].\n\n</div><div tiddler=" 1920toDesertPlane" tags="" created="201410062234" modifier="twee" twine-position="3871,608">Just as you're starting to panic about where exactly you're going, the cab coasts to a stop and the doors unlock.\n\n&quot;Now arriving at the Desert Plain,&quot; the cab driver barks from the front seat. You turn to see who he is, but he's already gone, coasting away from you in a plume of dust.\n\nYou look up.\n\nOkay, you definitely were expecting something a bit...different than this.\n\nIn front of you are not golden desert sands, nor tumbleweeds, nor vast blue sky...but a plane.\n\nMade out of cake.\n\nIt's a [[dessert plane.|WTFPlane]]</div><div tiddler="StoryTitle" tags="" created="201406302150" modifier="twee" twine-position="10,150">Wonders of the Unusual Magical Machine</div><div tiddler="Transition2" tags="" created="201410062229" modifier="twee" twine-position="4046,663">You see a cab pull up to where you and Nathan are standing. You get in, only realizing that you have no idea where this cab is going after the door shuts. The windows are blacked out, so you can't really see anything outside. You hold the piece of copper in your hands as you pull away as you wonder what significance it has.\n\nAs the cab drives away, Nathan ducks into a phone booth.\n\n&quot;Yes, hello? Yes. I've sent him on his way to &lt;&lt;if $dessertPlane is &quot;yes&quot;&gt;&gt;the final trial&lt;&lt;else&gt;&gt; second trial&lt;&lt;endif&gt;&gt;. You shouldn't have to worry any more.&quot;\n\nYour cab makes a &lt;&lt;if $dessertPlane is &quot;no&quot;&gt;&gt;[[sharp right turn| 1920toDesertPlane]]&lt;&lt;else&gt;&gt; [[sharp left turn|FinalTrialStop]]&lt;&lt;endif&gt;&gt; and barrels down the street.</div><div tiddler="ReadMind" tags="" created="201409270937" modifier="twee" twine-position="5700,170">&quot;...read my mind?&quot; you ask, to which you receive a small chuckle from &lt;&lt;print $partnerName&gt;&gt;.\n\n&quot;Not exactly...&quot; she mumbles sheepishly, scratching the back of her head. &quot;I should probably tell you that I've been planning this for months.&quot;\n\nShe looks at the leather strap, piece of copper, and turquoise in your hands.\n\n&quot;Do you know what these are for?&quot;\n\n&quot;Are they for...&quot;\n\n[[&quot;A piece of jewelry?&quot;|Jewelry]]\n\n[[&quot;A piece of armor?&quot;|Armor]]</div><div tiddler="GetChocolate" tags="" created="201408142108" modifier="twee" twine-position="2599,1144">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasChocolate = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;Carefully, you dip your hand into the chocolate river. It's pleasantly cool, and chocolate runs through your fingers before you snag a piece of baking chocolate.\n\nThis will be perfect for icing the plane.\n\nLicking the remaining chocolate from your fingers, you put the baking chocolate in your backpack.\n\nNow you...\n\n[[talk to Andrew.|TalktoAndrew]]\n&lt;&lt;if $hasChocolate is &quot;yes&quot;&gt;&gt;or\n[[admire the sugar gulls.|AdmireGulls]]&lt;&lt;endif&gt;&gt;\nor\n[[go back to the dessert plane.|OuterPlane]]</div><div tiddler="Conversation" tags="" created="201410021957" modifier="twee" twine-position="2987,128">You walk up to Detective Ida and Inspector General Nathan, both deep in conversation about the details of the case. \n\nWith them is a third person...or, at least you think it's a person. They're wearing a ghost costume, so you can't really see what they look like. They're looking sadly at the ground.\n\n&quot;What I'm trying to say is that I think Mar here actually saw the murder take place,&quot; Ida says, as Nathan nods. &quot;But he also could be a suspect,&quot; Nathan replies, gesturing to Mar, who says nothing.\n\nIda turns to you. What do you think, &lt;&lt;print $playerName&gt;&gt;?\n\n[[&quot;I'd like to talk to Doctor John.&quot;|HalloweenPail]]\n\n[[&quot;I'd like to talk to the ghost.&quot;|TalkMar]]\n\n[[&quot;I'd like to talk to you and Nathan.&quot;|TalkIdaNathan]]\n\n&lt;&lt;if $metAndy is &quot;yes&quot;&gt;&gt;[[&quot;I know who killed C.&quot;|Accuse]]&lt;&lt;endif&gt;&gt;</div><div tiddler="CatchGulls" tags="" created="201409011714" modifier="twee" twine-position="2471,1366">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasSugar = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You throw your hands out in front of you, stumbling into the river to catch the gulls. They squawk and fly out of arm's reach.\n\nYou wait for them to settle and try again; they're surprisingly fast, but after several tries you grab a handful of feathers from a gull.\n\nSaid gull eyes you irately as you stuff the sugar feathers into your backpack.\n\nFeeling sorry for the gull, you scoop your hand into the water, pulling up a wriggling Swedish fish and toss it to the gull.\n\nIt catches it and snaps it up, squawking a note of thanks to you as it settles itself back down in the river.\n\nYou...\n[[talk to Andrew.|TalktoAndrew]]\nor\n[[dip your hand into the river to get some baking chocolate.|GetChocolate]]\nor\n[[go back to the dessert plane.|OuterPlane]]</div><div tiddler="Start" tags="" created="201406302150" modifier="twee" twine-position="10,10">&lt;&lt;set $playerName = prompt(&quot;Welcome to the Wonders of the Unusual Magic Machine! What is your name?&quot;,&quot;Matt&quot;)&gt;&gt; \nLight streams through the window and into your eyes, forcing you awake. You yawn and roll over, hoping to get an extra ten minutes of sleep when...\n\n[[You feel your girlfriend sitting on your chest.|WhoIs]]</div><div tiddler="NoGo" tags="" created="201407061733" modifier="twee" twine-position="1151,14">The transmogrifier balks and an acrid green smoke comes out from the interface. Looks like &lt;&lt;print $partnerName&gt;&gt;'s trip was one-way.\n\nThere's got to be a way to make this transmogrifier work again, you think to yourself.\n\nYou take a deep breath and [[look at your options.|FindOut]]</div><div tiddler="Jewelry" tags="" created="201409270943" modifier="twee" twine-position="5899,353">&quot;...a piece of jewelry?&quot;\n\n&quot;Yes!&quot; she answers, &quot;I wanted to make you something special... something that shows you how much I, and all the people around you care about you.&quot;\n\nShe gestures around you, to where you see your friends; Andrew taking small nibbles of his truffle tie and offering some to Nathan, who offers pretzels in return, Ida adjusting her detective's hat, John sitting in a chair talking with Tim who is strumming his guitar, and Marc who is eating some candies out of a pumpkin pail.\n\n&quot;All of these people love and care about you, as do I. So I asked them to help me with this and to play along on your journey. Admittedly, I think I did Andrew a disservice leaving him alone in a desert of dessert...&quot;\n\n&quot;I don't know what you're talking about,&quot; Andrew says, his mouth full of truffle tie. &quot;Thish was delishous.&quot;\n\nShe turns to you. &quot;I wanted to give you something for you to wear, but I also wanted to give you an experience that you'd never forget.&quot;\n\n[[She takes the leather, copper, and turquoise from your hands.|Bracelet]]</div><div tiddler="iceThePlane" tags="" created="201409131347" modifier="twee" twine-position="2371,1156">&lt;&lt;silently&gt;&gt;&lt;&lt;set $icedPlane = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;Using a spoon borrowed from Andrew, you whip the cream, sugar, and chocolate into a frothy mixture. You watch as the ingredients combine to make a rich, chocolatey icing. This will be perfect.\n\nYou look up at the plane. &quot;If only we had something to paint the plane,&quot; you muse, looking around.\n\n&quot;On it!&quot; Andrew calls, dragging a roller-brush across the candied dessert and presenting it to you.\n\nWithin the matter of a few hours, you and Andrew have successfully iced the plane. Congratulations!\n\nYou [[return to the plane.|OuterPlane]]</div><div tiddler="GetCrystal" tags="" created="201407051233" modifier="twee" twine-position="1165,381">You go back around to the wiring of the space transmogrifier. This was the part of the transmogrifier that you were having trouble with last night.\n\n&lt;&lt;print $partnerName&gt;&gt; said that she had fixed this the night before.\n\nYou open the panel and inspect the wiring--everything looks about the same the night before, except there's a strange blue stone stuffed amidst the wires.\n\nIt looks like it is attached to &lt;&lt;if $wiresCMYK is &quot;yes&quot;&gt;&gt;the cyan, magenta, yellow, and black wires.&lt;&lt;else if $wiresRGB is &quot;yes&quot;&gt;&gt;the red, green, and blue wires.&lt;&lt;else&gt;&gt;the red, magenta, and black wires.&lt;&lt;endif&gt;&gt;\n\nThere are &lt;&lt;if $wiresCMYK is &quot;yes&quot;&gt;&gt;red, green, and blue&lt;&lt;else if $wiresRGB&gt;&gt;cyan, yellow, magenta and black&lt;&lt;else&gt;&gt;cyan, green, blue, and yellow&lt;&lt;endif&gt;&gt; wires hanging free.\n\nYou...\n[[Attach the crystal to the red, green, and blue wires.|RGBWires]]\nor\n[[Attach the crystal to the cyan, magenta, yellow, and black wires.|CMYKWires]]\nor\n[[Return to the front of the space transmogrifier.|FindOut]]\n&lt;&lt;if $wiresAdjusted is &quot;yes&quot;&gt;&gt;\nor\n[[Reset the wires.|WireReset]]\n&lt;&lt;endif&gt;&gt;</div><div tiddler="CakepitRestored" tags="" created="201409141251" modifier="twee" twine-position="1439,1226">&lt;&lt;silently&gt;&gt;&lt;&lt;set $fixedCakepit = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;\nYou gingerly replace the dial with the peppermint you found in the cream spring. The plane hums to life.\n\n&quot;Aaarrrgh, I can't believe all it took was replacing a dial!&quot; Andrew sighs, holding his head. &quot;I was overthinking it. Thanks, &lt;&lt;print $playerName&gt;&gt;.&quot;\n\n&quot;You're welcome,&quot; you respond.\n\n&lt;&lt;if $icedPlane is &quot;yes&quot;&gt;&gt;\nYou have both iced the plane and fixed the cakepit. Are you ready to [[take off|EndDessertPlane]]?\n&lt;&lt;else&gt;&gt;\n&quot;All that you need to do now is ice the plane,&quot; Andrew says. &quot;I've got a roller-brush for the icing once you've made it.&quot;\n&lt;&lt;endif&gt;&gt;\n\nWhat will you do?\n\n[[Check out the outside of the plane.|OuterPlane]]\n\n[[Go to the chocolate river.|ChocoRiver]]\n\n[[Take a look at the bubbling cream spring.|CreamSpring]]</div><div tiddler="TellStory" tags="" created="201409270930" modifier="twee" twine-position="5454,268">You tell her the story of where you've been, from the time when she disappeared suddenly and you had to rewire the transmogrifier, to the mysterious death of the letter C and to catching sugar gulls in a land filled with cake.\n\nYou notice that she and Tim are nodding as if they already know. Come to think of it, Tim's song just recapped your adventures... how did they know?\n\n&quot;Did you...&quot;\n\n[[&quot;Read my mind?&quot;|ReadMind]]\n\n[[&quot;Plan this all along?&quot;|Plam]]</div><div tiddler="InspectArea" tags="" created="201408142040" modifier="twee" twine-position="2055,1278">Let's inspect the area for icing. You're sure you can find something to make this plane fly...\n\nYou look around at the area around the plane; there is a chocolate river stretching across the horizon, dotted with white sugar gulls and licorice reeds.\n\nCloser towards your feet is a bubbling cream spring with tiny chocolate frogs resting on peppermint lilly pads.\n\nWhere do you go first?\n\n[[Hike to the chocolate river.|ChocoRiver]]\n[[Inspect the bubbling cream spring.|CreamSpring]]\n[[Go back to the outside of the plane.|OuterPlane]]\n[[Or maybe you should check out the cakepit.|LookAtCakepit]]</div><div tiddler="FindOut" tags="" created="201407051242" modifier="twee" twine-position="1140,149">You are now in front of the space transmogrifier, looking around at the dials.\n\nYou have the remote in your hand.\n\nYou...\n[[Check the bag of carrots.|GetCarrots]]\nor\n[[Go around back to the wiring.|GetCrystal]]\nor\n[[Look at the dials in front of you.|GetDial]]</div><div tiddler="MarHalloween" tags="" created="201410042150" modifier="twee" twine-position="3998,153">&quot;How do you feel about Halloween?&quot; you ask in a last-ditch effort to get Mar to talk. You wish you could cheer him up, but he doesn't seem that cheerful. &quot;You're wearing a ghost costume, so you must like it.&quot;\n\n&quot;I'm wearing a costume to cover my face,&quot; he mumbles, shifting away from you.\n\n&quot;Oh...I'm sure it's not that bad. Can I see your face?&quot; you inquire. Mar shifts nervously. &quot;Please?&quot;\n\nHe pulls the sheet off his face and you cringe.\n\nWhere his face was is a shifting, black smudge. His face is barely visible from the black mars obscuring his visage. Now you understand why Ida and Nathan were calling him Mar.\n\n&quot;I knew you wouldn't like it,&quot; he sighs glumly. &quot;I'm nothing without my C.&quot;\n\nYou wonder what he means by that...\n\nYou...\n\n[[Go back to Ida and Nathan.|TalkIdaNathan]]\n\n[[Talk to John.|CBody]]\n\n[[Go down to the river.|DownTheRiver]]</div><div tiddler="RGBWires" tags="" created="201407051252" modifier="twee" twine-position="1144,592">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $wiresAdjusted = &quot;yes&quot;; $wiresRGB = &quot;yes&quot;; $wiresCMYK = &quot;no&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;\nYou attach the crystal to the red, green, and blue wires. The crystal shivers and then turns a brilliant white.\n\nFrom the front of the space transmogrifier, [[you hear a click.|FindOut]]</div><div tiddler="BadEnding" tags="" created="201409271018" modifier="twee" twine-position="6484,451">The room falls silent.\n\n&quot;No,&quot; you say, looking a point right above &lt;&lt;print $partnerName&gt;&gt;'s head.\n\n&lt;&lt;print $partnerName&gt;&gt; pauses, giving you a funny look, and then her eyes widen in understanding.\n\n&quot;The only way you could have said no...&quot; she starts, looking up, &quot;is if there were dinosaurs RIGHT BEHIND ME.&quot;\n\nYou nod. Towering above your girlfriend is a drooling Utahraptor, known in the paleontological circles as being even more fearsome and deadly than the widely popularized Velociraptor.\n\nAs it bends down to gobble up your girlfriend, she spins around and roundhouse-kicks it in the stomach. What began as a quiet proposal turns into an all-out brawl with you punching dinosaurs, Nathan and Tim trying to wrangle them, Ida taming one, and John perched on top of a bookshelf as Marc tries to talk him down.\n\nBOOM! BAM! BIFF! \n\nOne by one, unruly utahraptors, terrible tyrannosaurs, stalwart stegosauruses and pterrifying pterosaurs are subdued. &lt;&lt;print $partnerName&gt;&gt; climbs on top of one of the dinosaurs, letting out a victory yell. \n\nYou chime in.\n\nIda pulls out a set of dinosaur bridles that she'd prepared for this very ocassion (don't ask).\n\n&quot;&lt;&lt;print $playerName&gt;&gt;,&quot; &lt;&lt;print $partnerName&gt;&gt; says as you, her, and your friends ride into the sunset on a stampede of dinosaurs, &quot;I love you.&quot;\n\n&quot;I love you too,&quot; you say, leaning over your stegosaurus to give her a kiss.\n\nTHE END\n\n[[Credits?|Credits]]\n</div><div tiddler="NoPants" tags="" created="201407011724" modifier="twee" twine-position="654,10">&quot;Yes, let's go!&quot; you shout, and &lt;&lt;print $partnerName&gt;&gt; eyes you up and down, laughing.\n\nOh.\n\nWell, maybe you [[should bring pants|BringPants]], those will probably be important. Or...\n\n[[Continue without pants.|DontBringPants]]</div><div tiddler="GetDial" tags="" created="201407051233" modifier="twee" twine-position="1407,196">You're presented with a series of dials. The three main dials seem to be as such: the left-most dial, the middle dial, and the right-most dial.\n\nThe left-most dial is in the worst shape. It looks like it won't be turning anytime soon.\n\nBoth the middle dial and the right-most dial look the most promising. The middle dial is colored white, and the right-most dial is colored black. It looks like they can light up under the right circumstances.\n&lt;&lt;if $wiresRGB is &quot;yes&quot;&gt;&gt;You notice that the white dial is now illuminated. It looks like you can [[turn it.|DessertPlainEngage]]\n&lt;&lt;else&gt;&gt;\nThe white dial is dark and won't budge.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $wiresCMYK is &quot;yes&quot;&gt;&gt;You notice that the black dial is now illuminated. It looks like you can [[turn it.|DeadCEngage]]\n&lt;&lt;else&gt;&gt;\nThe black dial is dark and won't budge.\n&lt;&lt;endif&gt;&gt;\nYou consider [[going back to the front of the space transmogrifier.|FindOut]]</div><div tiddler="freshCream" tags="" created="201409131329" modifier="twee" twine-position="1488,1447">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasCream = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You stick a finger into the warm, bubbling cream spring and taste it. Mmmm, yummy. You are definitely going to want to get some of this...\n\nYou draw out a canteen from your pack and pour out the extra water to make room for cream. Gingerly, you place the canteen in the water and watch as the milky-white liquid flows into the mouth of the bottle.\n\nThis should be perfect for making icing.\n\nYou...\n\n[[Grab a peppermint lillypad.|Peppermints]]\n\n[[Eat a chocolate frog.|chocoFrog]]\n\n[[Return to the plane.|OuterPlane]]\n\n</div><div tiddler="CMYKWires" tags="" created="201407051252" modifier="twee" twine-position="1317,580">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $wiresAdjusted = &quot;yes&quot;; $wiresCMYK = &quot;yes&quot;; $wiresRGB = &quot;no&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;\nYou attach the crystal to the cyan, magenta, yellow and black wires. The crystal reassembles itself and then turns a muddy black.\n\nFrom the front of the space transmogrifier, [[you hear a click.|FindOut]]</div><div tiddler="StoryAuthor" tags="" created="201406302150" modifier="twee" twine-position="10,290">by chostett</div><div tiddler="HalloweenRant" tags="" created="201410022023" modifier="twee" twine-position="3434,680">&quot;What are you for Halloween?&quot; you ask, eyeing him up and down. &quot;I can't quite pin down who you are--&quot;\n\n&quot;BAH!&quot; He throws his hands up in the air. &quot;I should ask what YOU are for Halloween! Do YOU side with the monsters, too?&quot;\n\n&quot;Wait, what?&quot; This conversation turned from weird to weirder.\n\n&quot;The monsters! They come out every Halloween night and EAT people like me!&quot; he gasps, holding onto his chest dramatically. &quot;Had I not come into luck lately, I would be just like my friends...eaten, no...SACRIFICED to the monster gods this so-called &quot;holiday&quot; represents! If it were up to me, I'd ban Halloween right here, right now! What an awful holiday. I can't believe that an upstanding person such as yourself would even consider supporting the heinous unethical practices of monsters...&quot;\n\n...okay...he doesn't show any signs of stopping. His face is getting puffy from rage. Maybe you shouldn't have asked him that. \n\nYou...\n\n[[Ask him what he's doing here.|WhatDo]]\n\n[[Return to Detective Ida and Inspector General Nathan.|Conversation]]\n\n[[Return to Doctor John and the body.|CBody]]</div><div tiddler="Zap" tags="" created="201407012132" modifier="twee" twine-position="982,150">It all happens in a flash.\n\n&lt;&lt;print $partnerName&gt;&gt; dissipates with a loup ZAP. \n\nThe bag of carrots she was once holding drops to the floor with a thud.\n\nShe is gone.\n\nYou are [[still here.|Confusion]]</div><div tiddler="CreamSpring" tags="" created="201408142058" modifier="twee" twine-position="1877,1511">You wander over to the spring. It's bubbling with fresh heavy whipping cream as chocolate frogs jump from peppermint to peppermint.\n\nYou wonder what you could use for icing and for fixing the cock...ahem, cakepit.\n\nThe peppermints look delicious. The frogs also look delicious, but they also look alive and very fast.\n\nYou...\n\n&lt;&lt;if $hasSugar is &quot;yes&quot;&gt;&gt;[[Scoop up some fresh cream.|freshCream]]&lt;&lt;endif&gt;&gt;\n\n[[Pick up a peppermint.|Peppermints]]\n\n[[Eat a chocolate frog.|chocoFrog]]</div><div tiddler="InspectBody" tags="" created="201410042138" modifier="twee" twine-position="2422,340">Finally close enough to see the body, you inspect the dead C. At first blush, it appears to be a pile of clothes, but upon further inspection you find that the clothes are covered in hair.\n\nBut you remember John saying that the C was murdered with something that you can sit on? What's with the hair?\n\nThe hair itself is frizzy and fine; the longest strand is about two inches long.\n\nYou check out the ID that John was looking at. It has the letter &quot;C&quot; printed on it. Who knew that letters had id's?\n\nIt looks like the C is [[clutching something in its clothed hand.|InspectCandy]]</div><div tiddler="HeyYou" tags="" created="201409131400" modifier="twee" twine-position="2094,10">&quot;Stop! Criminal!&quot;\n\nYou spin around to see a tallish man with puffy, brown hair in a porkpie hat, clutching an old bag of oats he has wrapped around his shoulders. Around you is a deserted, 1920's-era town, complete with hanging street lights and wrought iron carriages.\n\n&quot;Wait, what?&quot; His face looks familiar. &quot;N-Nathan?&quot;\n\n&quot;That's Inpector General Nathan to you!&quot; he barks, adjusting the oats on his shoulder.\n\n&quot;Wait, why are you wearing oats?&quot; you ask, starting to confirm your suspicions.\n\n&quot;Don't play dumb with me, buddy.&quot; He shakes his finger at you.\n\n&quot;This here is the letter C. And he's been murdered on this night, October 31st.&quot;\n\nYou are standing in front of the body of the letter C.\n\nA Dead C.\n\nYou almost laugh out loud, but Nathan's icy gaze prevents you from doing so.\n\n&quot;You're under arrest! The detective and her lapdog should be here any minute. Hopefully we can just take you to lockup and I won't have to listen to any of their drivel,&quot; he growls, [[inspecting his watch.|TheDetective]]\n\nYou don't like this one bit...</div><div tiddler="ClearedUp" tags="" created="201409162011" modifier="twee" twine-position="2565,16">&quot;Look at the body. It's damp. And &lt;&lt;print $playerName&gt;&gt;'s clothes aren't wet at all,&quot; she explains. She gives a smug look to Inspector General Nathan, who fumes.\n\n&quot;How could someone who is completely dry murder a C by the river's edge and not get wet?&quot; she asks.\n\n&quot;Well, they could have...&quot;\n\n&quot;Nonsense! The body is as damp as the river, and judging by the appearance, it's only been here for...&quot;\n\n&quot;An hour,&quot; John cuts in, nodding at the body. &quot;With that kind of... oloration.&quot;\n\nOloration? What is an...oh. You understand now why they couldn't take a cab now.\n\n&quot;Yes, that. So kindly unhand him.&quot; Ida waves off Nathan, who steps back from you, looking redfaced.\n\nWhew. You watch John bend down to examine the body closer as Nathan pulls Ida away for a talk.\n\nYou kneel down next to John and [[try to see what he's doing.|TrySee]]</div><div tiddler="SongEnd" tags="" created="201409262108" modifier="twee" twine-position="5117,266">&quot;Awesome! Thanks for helping me out with that.&quot; He strums a bit on the guitar. &quot;Wanna hear me play?&quot;\n\nYou nod. You sit down and listen to Tim play.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n.\n[[...|FinalPiece]]</div><div tiddler="DeadCEngage" tags="" created="201407061707" modifier="twee" twine-position="1731,11">The transmogrifier hums to life, the engine whirring.\n\n&quot;Now visiting the Dead Sea,&quot; it chimes, &quot;please press the ENGAGE button on the remote.&quot;\n\nYou look at the remote in your hands. The Dead Sea? Maybe she went there...\n\n[[You press the ENGAGE button.|DeadCIntro]]</div><div tiddler="sillyAndrew" tags="" created="201409011707" modifier="twee" twine-position="2661,1864">As you start to get lost in your thoughts, you're roused by Andrew shouting.\n\n&quot;Look, a sugar gull!&quot; He diverts your attention to a sugar gull who is intently watching the surface of the water. He crouches low and gives you a signal to be quiet...then pounces on the bird, ruffling up some of its feathers.\n\nThe sugar gull squawks loudly and flies away.\n\n&quot;What the hell did you do that f--&quot; you start, but then see Andrew put the feather in his mouth. The feather dissolves instantly on his tongue.\n\nYou consider that eating sweets alone all day might have caused Andrew to go a little...nutty.\n\nYou...\n\n[[dip your hand into the river to get some baking chocolate.|GetChocolate]]\n&lt;&lt;if $hasChocolate is &quot;yes&quot;&gt;&gt;or\n[[admire the sugar gulls.|AdmireGulls]]&lt;&lt;endif&gt;&gt;\nor\n[[return to the plane.|OuterPlane]]</div><div tiddler="AccuseAndy" tags="" created="201410022108" modifier="twee" twine-position="3671,704">&quot;I think it was this strange guy named Andy,&quot; you respond. I met him when I found a raft downstream...&quot;\n\n&quot;A raft?&quot; Nathan lifts his eyebrows. &quot;That must have been how the killer got away.&quot;\n\n&quot;Yeah, and he even wanted to help me dispose of it. I know where it is.&quot;\n\nIda's brow furrows. &quot;Are you sure?&quot;\n\n[[&quot;Yes, I'm sure.|EndDeadC]]\n\n[[&quot;Wait, I need to rethink this.|Rethink]]</div><div tiddler="WakeTime" tags="" created="201406302158" modifier="twee" twine-position="338,27">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $times_sleep = 0&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;\n&lt;&lt;print $partnerName&gt;&gt; is sitting on top of you, grinning. She's holding what seems to be a remote control for something and a 3lb. bag of carrots. You know, normal stuff.\n\nYou respond to her in a groggy voice,\n[[&quot;It's sleep time, &lt;&lt;print $partnerName&gt;&gt;.&quot;|SleepTime]]\n</div><div tiddler="RockShelfIntro" tags="" created="201409141339" modifier="twee" twine-position="4324,267">Tim doesn't seem to be in any hurry, so &lt;&lt;print $partnerName&gt;&gt; must be coming by soon. As you relax, you feel all the tension that you'd been holding onto release into a long sigh.\n\n&quot;I've been working on this tune for a little while, and I can't seem to put all the words to it,&quot; he explains. He strums on his guitar and hums the words.\n\n&quot;Hmm...what am I missing? [[Maybe a beginning to our tale...&quot;|SongPart1]]</div><div tiddler="Armor" tags="" created="201409270943" modifier="twee" twine-position="5900,166">&quot;...a piece of armor?&quot;\n\n&quot;Uhh, no,&quot; she responds, twirling a strand of hair around her fingertips. &quot;Though if you want me to transmogrify you to where a dragon is, I guess I could do that...&quot;\n\nNo thanks! You shake your head emphatically. You've had enough adventure for today.\n\n&quot;Here's the thing,&quot; she starts, &quot;I wanted to make you something special... something that shows you how much I, and all the people around you care about you.&quot;\n\nShe gestures around you, to where you see your friends; Andrew taking small nibbles of his truffle tie and offering some to Nathan, who offers pretzels in return, Ida adjusting her detective's hat, John sitting in a chair talking with Tim who is strumming his guitar, and Marc who is eating some candies out of a pumpkin pail.\n\n&quot;I wanted to give you something for you to wear, but I also wanted to give you an experience that you'd never forget.&quot;\n\n[[She takes the leather, copper, and turquoise out of your hands.|Bracelet]]</div><div tiddler="DeadCCrash" tags="" created="201409141322" modifier="twee" twine-position="1990,141">The plane lands on the outskirts of an old town, the dark sky looming above.\n\n&quot;Sorry, &lt;&lt;print $playerName&gt;&gt;. The weather looks rough here, I'm going to have to ground this plane,&quot; Andrew says. &quot;I'll until the rain lets up; you take a look around, okay? It says on my map here we're at...the Dead Sea?&quot;\n\nYou nod and hop out of the plane.\n\nYou find yourself standing in front of a body. It is cloaked in a crimson cap and is wearing a crumpled cardigan. It's damp from the river bed that is running beside it.\n\nYou narrow your eyes as you look closer at the pile of clothes in front of you.\n\nMaybe it's a body?\n\nYou walk around it, staring at it intently. It doesn't have legs or arms...or eyes. The spine is bent in a...\n\nWait.\n\nNo, that would be too weird.\n\n[[Would it?|HeyYou]]</div><div tiddler="Plam" tags="" created="201409270937" modifier="twee" twine-position="5660,430">&quot;...plan this all along?&quot; you ask, to which Tim and &lt;&lt;print $partnerName&gt;&gt; nod their heads enthusiastically.\n\n&quot;Yes!&quot; she replies. &quot;I've been planning this for months. I had to keep fixing and breaking the transmogrifier so that you didn't know what I was planning... but I admit, I think I broke it too many times. It wasn't supposed to transmogrify me that quickly.&quot;\n\nShe looks at the leather strap, piece of copper, and turquoise in your hands.\n\n&quot;Do you know what these are for?&quot;\n\n&quot;Are they for...&quot;\n\n[[&quot;A piece of jewelry?&quot;|Jewelry]]\n\n[[&quot;A piece of armor?&quot;|Armor]]</div><div tiddler="FinalPiece" tags="" created="201409262112" modifier="twee" twine-position="5286,267">When he's done, you stand up, clapping. Tim smiles as he sets down the guitar and picks up a leather strap. It's small, and you guess that it could have come from his guitar.\n\nYou now have a turquoise stone, some copper, and a leather strap.\n\nAs soon as he takes his hand away from yours, the door swings open, revealing &lt;&lt;print $partnerName&gt;&gt;, a huge grin on her face.\n\n&quot;&lt;&lt;print $partnerName&gt;&gt;!&quot; you gasp and tackle her with a hug. Never have you been so relieved to see her; you feel like it's been ages. You plant kisses on her face, neck, and shoulders as she laughs, hugging you back.\n\n&quot;I didn't mean to worry you that much, &lt;&lt;print $playerName&gt;&gt;,&quot; she chuckles, smoothing your hair. &quot;I was just gone for a few minutes--well, I guess in transmogritime, it's a little longer than a few minutes.&quot;\n\n&quot;Days!&quot; you correct her, &quot;It's been days.&quot;\n\n&quot;I'm so sorry,&quot; she whispers, kissing your forehead. &quot;I didn't know.&quot;\n\n[[You start to tell her the story of your journey.|TellStory]]</div><div tiddler="GetCarrots" tags="" created="201407051233" modifier="twee" twine-position="1477,13">You crouch down to inspect the carrots.\n\nThey are her favorite kind of carrots in a 3lb. bag. You find the sight of her carrots brings back the memory of her hand in yours, and you wipe your eyes.\n\nYou [[leave the carrots on the ground and return to the transmogrifier.|FindOut]]</div><div tiddler="WaitaMinute" tags="" created="201410042121" modifier="twee" twine-position="3886,13">&quot;Wait, you did? But how? Why?&quot; you inquire.\n\n&quot;Well, you know. I...strangled him.&quot; Mar shifts from one foot to the other. &quot;With hair.&quot;\n\n&quot;Okay... why?&quot;\n\nMar falls silent. After a long while, he holds out his hands once again. &quot;Just take me. I can't live without C,&quot; he repeats. You have a feeling like you're not going to get much out of him...\n\nYou...\n\n[[Ask him how he feels about Halloween.|MarHalloween]]\n\n[[Go back to Ida and Nathan.|TalkIdaNathan]]\n\n[[Talk to John.|CBody]]\n\n[[Go down to the river.|DownTheRiver]]\n\n</div><div tiddler="GoodEnding" tags="" created="201409271018" modifier="twee" twine-position="6493,195">&quot;Yes!&quot; you reply, taking the bracelet from her hands and sliding it on your wrist.\n\nShe scoops you up into a big hug that nearly lifts you off the ground. Tim, Nathan, Ida, John and Marc pull out confetti and throw it on the two of you as you spin around in her arms. It felt like an eternity for you to get here and you wish this moment would never end.\n\n&quot;&lt;&lt;print $playerName&gt;&gt;, I love you,&quot; she whispers in your ear, and you squeeze her tighter.\n\n&quot;I love you too, &lt;&lt;print $partnerName&gt;&gt;.&quot;\n\nTHE END...\nOF THIS GAME, BUT THE BEGINNING AND CONTINUATION OF A TRULY INCREDIBLE PARTNERSHIP.\n\nI love you, Matt.\n-C\n\n[[Credits?|Credits]]</div><div tiddler="Transition" tags="" created="201410062226" modifier="twee" twine-position="4075,804">&quot;I'm actually looking for someone whose name starts with C,&quot; you confess. &quot;I wasn't sure if I would be able to find her with the C being dead and all...&quot;\n\n&quot;Don't worry. With the murder solved, it looks like everything has returned to normal.&quot; He smiles. &quot;And I think I know where you can find her.&quot;\n\n&quot;Really? Where?&quot;\n\n&quot;[[Get into this cab|Transition2]], and you'll see. And here, take this with you.&quot; He hands you a piece of old, brushed copper. &quot;Give this to her when you see her,&quot; Nathan says.</div><div tiddler="TalkMar" tags="" created="201410022102" modifier="twee" twine-position="3434,3">&quot;I'd like to talk to the ghost,&quot; you reply, and Ida nods.\n\n&quot;Sure. &lt;&lt;if $metMar is &quot;yes&quot;&gt;&gt;Here's Mar again.&lt;&lt;else&gt;&gt; Let me introduce you.&quot;\n\nShe guides you over to the ghost, who is looking sadly at the ground.\n\n&quot;This is Mar,&quot; she starts. &quot;Mar, &lt;&lt;print $playerName&gt;&gt;, &lt;&lt;print $playerName&gt;&gt;, Mar.&quot;&lt;&lt;endif&gt;&gt;\n\n&quot;Oh...hi &lt;&lt;print $playerName&gt;&gt;.&quot; Mar greets you sadly.\n\n[[&quot;Why are you so sad?&quot;|CompletesMe]]</div><div tiddler="KeepRaft" tags="" created="201410022018" modifier="twee" twine-position="2884,273">&quot;Actually, I could use a raft like that,&quot; you reply, looking at the strange craft.\n\n&quot;What for?&quot; Andy asks.\n\n&quot;You know...for my...cousin's dog's bar mitzvah...&quot; you stammer, looking for an excuse. You have a feeling that this strange raft is evidence.\n\nAndy looks nonplussed and then shrugs. &quot;All right, I guess if it's for your cousin's dog.&quot;\n\nHuh, that was easy...\n\nHe watches you as you deflate the raft and sling it over your shoulder. You get the feeling that he's not interested in helping you carry the raft back upstream.\n\nYou...\n\n[[Ask him what he's doing here.|WhatDo]]\n\n[[Ask him what he is for Halloween.|HalloweenRant]]</div><div tiddler="WireReset" tags="" created="201407061655" modifier="twee" twine-position="892,589">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $wiresAdjusted = &quot;no&quot;; $wiresRGB = &quot;no&quot;; $wiresCMYK = &quot;no&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;You reset the wires. Some things are better left the way they are.\n\nYou then...\n[[Return to looking at the wires.|GetCrystal]]\nor\n[[Return to the front of the space transmogrifier.|FindOut]]</div><div tiddler="chocoFrog" tags="" created="201409131329" modifier="twee" twine-position="2059,1910">You try to catch the chocolate frogs, with the operative word being &quot;try.&quot; Every time you try to grab them, they slip through your fingers, leaving chocolate smudges on your hands. Andrew tries to assist you, but he ends up knee-deep in cream and frogless.\n\nYou both agree that trying to catch the frogs is probably a waste of time and energy that could be better spent making icing and fixing the plane.\n\nYou...\n\n[[Return to the plane.|OuterPlane]]</div><div tiddler="ThrowAwayRaft" tags="" created="201410022018" modifier="twee" twine-position="3058,579">You agree with him that it needs to be thrown away. It's an ugly sight, and it's polluting the river.\n\nYou help him carry it to a dumpster and stuff it inside. It barely fits, but you manage to close the dumpster door on top of it successfully. You're thankful for Andy's sweet scent to mask the stench of rotting garbage.\n\n&quot;Thanks for helping me with that!&quot; he says, looking pleased with himself.\n\nYou...\n\n[[Ask him what he's doing here.|WhatDo]]\n\n[[Ask him what he is for Halloween.|HalloweenRant]]</div><div tiddler="SleepTime" tags="" created="201406302203" modifier="twee" twine-position="345,183">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $times_sleep = $times_sleep + 1&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;\n&lt;&lt;if $times_sleep lte 3&gt;&gt;&quot;It's not sleep time, it's wake time!&quot; she insists. You try to squirm out from underneath her, but it's no use.\n\n[[&quot;It's sleep time!&quot;|SleepTime]] you insist.\n&lt;&lt;else&gt;&gt;You're starting to think that resistance is futile. You might as well give in.\n\n[[&quot;It's...wake time,&quot;|OhGood]] you begrudgingly relent.\n&lt;&lt;endif&gt;&gt;</div><div tiddler="MarBadEnd" tags="" created="201410042226" modifier="twee" twine-position="3944,438">&quot;Yes, I'm sure.&quot;\n\nMar flops over as Inspector General Nathan clamps his handcuffs over his wrists, and Detective Ida looks grimly by as Mar is loaded into the police van and dragged off to jail.\n\nIn the distance, you can hear Andy tossing candy into the river, screaming, &quot;BE FREE, BRETHREN!&quot;\n\nDoctor John jogs over to the two of you. &quot;I figured out who the killer is...and you won't believe it.&quot;\n\n&quot;It's already too late, Doctor.&quot; Ida sighs softly as she turns away. &quot;An innocent man is already going to jail.&quot;\n\n&quot;Wh...what? But you were so sure that Mar...&quot;\n\nUnfortunately, you'll never know the full story, and your journey ends here.\n\nBAD END</div><div tiddler="WhatDo" tags="" created="201410022023" modifier="twee" twine-position="3116,422">&quot;What are you doing here?&quot; you ask him, to which he turns a little red in the face. &quot;I told you, I was taking a walk around here!&quot; he spurts, looking embarassed. \n\nHe adjusts his cable-knit sweaterpants. &quot;Geez, people are weird...&quot;\n\nUm...but you're a people, dude.\n\nYou...\n\n[[Ask him what he is for Halloween.|HalloweenRant]]\n\n[[Return to Detective Ida and Inspector General Nathan.|Conversation]]\n\n[[Return to Doctor John and the body.|CBody]]</div><div tiddler="inspectNails" tags="" created="201407011724" modifier="twee" twine-position="497,20">They are, indeed, still purple.\n\n&quot;I know what you're thinking,&quot; she answers, &quot;I fixed it last night. It's working!&quot;\n\nYou are awestruck by her words. Finally, it's done. After all of that hard work, the two of you will be able to travel through strange new worlds effortlessly. You'll be like bizarre pioneers, mapping out what's in the fourth dimension and beyond.\n\nYou've been so busy building the thing that you're not even sure what to take on your journey.\n\n&lt;&lt;print $partnerName&gt;&gt; nudges your shoulder. &quot;I packed a bag for us. Ready to go?&quot;\n\nYou respond, [[&quot;Yes, let's go!&quot;|NoPants]]</div><div tiddler="WhatPlane" tags="" created="201407282307" modifier="twee" twine-position="2283,661">&lt;&lt;silently&gt;&gt;&lt;&lt;set $icedPlane = &quot;no&quot;&gt;&gt;&lt;&lt;set fixedCakepit = &quot;no&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You look up to the plane. It still looks delicious what with its spongy, marbled surface and biscotti wings.\n\n&quot;So what's the problem?&quot; you ask.\n\nAndrew points up at the front of the dessert plane. &quot;The cakepit is malfunctioning,&quot; he explains.\n\n&quot;Excuse me?&quot;\n\n&quot;The cakepit.&quot;\n\nOh...right.\n\n&quot;And also, have you seen the exterior? It needs a good coat of icing. Then it should be good to fly.&quot;\n\nIt looks like you should either [[inspect the area for icing|InspectArea]] or [[take a look at the cakepit|LookAtCakepit]].</div><div tiddler="DessertPlainEngage" tags="" created="201407061707" modifier="twee" twine-position="1504,813">The transmogrifier hums to life, the engine whirring.\n\n&quot;Now visiting the Desert Plain,&quot; it chimes, &quot;please press the ENGAGE button on the remote.&quot;\n\nYou look at the remote in your hands. The Desert Plain? Maybe she went there...\n\n[[You press the ENGAGE button.|DessertPlaneIntro]]</div><div tiddler="FinalTrialStop" tags="" created="201410062234" modifier="twee" twine-position="4276,557">Just as you're starting to panic about where exactly you're going, the cab coasts to a stop and the doors unlock.\n\n&quot;Now arriving at the Sentimental Rock,&quot; the cab driver barks from the front seat. You turn to see who he is, but he's already gone, coasting away from you in a plume of dust.\n\nYou are standing on a great plateau with what looks to be a small cottage perched atop the massive rock formation. Right outside the cottage is a figure.\n\nIt looks like...\n\n&quot;Tim!&quot; you shout, waving to him. He waves back, inviting you and Andrew into the house.\n\n&quot;What's going on? Where's &lt;&lt;print $partnerName&gt;&gt;?&quot; you inquire. Tim gives you a hug.\n\n&quot;Don't worry, &lt;&lt;print $partnerName&gt;&gt; has been waiting for you.&quot; he responds. &quot;Let's jam a little while we wait, huh?&quot;\n\n[[Tim picks up the guitar.|RockShelfIntro]]</div><div tiddler="OhGood" tags="" created="201406302203" modifier="twee" twine-position="507,231">&quot;It's wake time!&quot; she chimes back at you, hopping up and bounding towards the door. &quot;It's finally done!&quot;\n\nNow you're really awake. You two have been working on a space transmogrifier for the past six years, and you remember that last night, you both were so close to completing it. Except for that weird bug that turned your fingernails purple.\n\nYou [[inspect your fingernails.|inspectNails]]</div><div tiddler="LollipopPants" tags="" created="201407282307" modifier="twee" twine-position="2425,563">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasPants = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You are now wearing lollipop pantaloons. They are rainbow and sort of sticky.\n\n&quot;You look ridiculous,&quot; Andrew scoffs.\n\n&quot;You gave them to me,&quot; you counter, crossing your bare arms.\n\n&quot;Touche.&quot;\n\n&quot;Have you seen &lt;&lt;print $partnerName&gt;&gt;?&quot; you start to ask before he waves you away, chocolate dripping from his fingers.\n\n&quot;Yes, yes, I've seen her,&quot; he sighs.\n\n&quot;Where?!&quot; you ask desperately.\n\n&quot;Well...it's more of a problem of not where, but how to get to her.&quot;\n\nAndrew [[gestures to the plane|WhatPlane]].</div><div tiddler="SongPart2" tags="" created="201409262105" modifier="twee" twine-position="4632,265">Tim hums along. &quot;Yeah, and maybe...&quot;\n\n[[&quot;...Transmogrifier, why’d you transmogrify her / Was it really meant to be this way...&quot;|SongPart3]]\n\n[[&quot;my girlfriend disappeared in a flash / So I didn’t wear pants, no I didn’t wear pants...&quot;|SongPart3]]\n\n[[&quot;so now I’m going on this quest / to sort out this mess, I’ll try my best...&quot;|SongPart3]]</div><div tiddler="SongPart4" tags="" created="201409262107" modifier="twee" twine-position="4920,267">&quot;Great! And the last part?&quot;\n\n[[&quot;...then we went to a land where the C was dead / And I said...&quot;|SongEnd]]\n\n[[&quot;...solved some mysteries, ate some scones / I want to know...&quot;|SongEnd]]\n\n[[&quot;evil candy Andy wasn’t very dandy / But we learned some lessons, had some laughs, and now we’re singin’ this song--&quot;|SongEnd]]</div><div tiddler="HalloweenPail" tags="" created="201410022102" modifier="twee" twine-position="3533,146">&lt;&lt;silently&gt;&gt;&lt;&lt;set $hasPail = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;&quot;I'd like to talk to Doctor John,&quot; you reply. &quot;He won't let me look at the body.&quot;\n\n&quot;As well you shouldn't,&quot; Inspector General Nathan scoffs. &quot;You're a civi---&quot;\n\n&quot;Now, wait my good man,&quot; Detective Ida stops him with a smile. &quot;I'm interested to hear his take on the case...&quot;\n\n&quot;But Ida--&quot;\n\n&quot;Something tells me he has more at stake than just a passing gawker.&quot;\n\nShe extends her arm. In her hands is an empty Halloween pail.\n\n&quot;Where's the candy?&quot; you ask.\n\n&quot;Exactly,&quot; she responds. &quot;I would like you to show this to Doctor John; tell him I sent you.&quot;\n\nYou now have an empty Halloween pail.\n\nYou...\n\n[[Continue to talk with Ida and Nathan.|TalkIdaNathan]]\n\n[[Talk to Doctor John.|CBody]]\n\n[[Go down the river.|DownTheRiver]]</div><div tiddler="Proposal" tags="" created="201409271012" modifier="twee" twine-position="6310,286">&lt;&lt;print $partnerName&gt;&gt; bends down on one knee and holds out the bracelet to you.\n\nIn her eyes, you see tears well up. &quot;So I want to keep spending every day with you. I want us to keep discovering more about one another, to be strong together in the face of adversity, and to change in unexpected and beautiful ways.&quot;\n\n&quot;&lt;&lt;print $playerName&gt;&gt;... will you marry me?&quot;\n\n[[Yes|GoodEnding]]\n\n[[No|BadEnding]]</div><div tiddler="TalkIdaNathan" tags="" created="201410022102" modifier="twee" twine-position="3146,27">&quot;I'd like to talk to you and Nathan,&quot; you reply, as Ida fills you in on the conversation.\n\nApparently while they were debating your innocence, a man in a ghost costume walked up to the two of them and confessed that it was he who murdered the C. When they asked him who he was, he wouldn't say his name; eventually after a lengthy discussion he said his name was Mar.\n\n&quot;Mar? That's a weird name,&quot; you wonder. &quot;I should say!&quot; Inspector General Nathan responds. &quot;It sounds like the name of a killer. You know, to mar someone means to disfigure them.&quot;\n\n&quot;But the C wasn't disfigured,&quot; Detective Ida cuts in. &quot;It looks like Mar is.&quot;\n\n&quot;Yeah, but look at him! He's wearing a ghost costume, probably to conceal his identity!&quot;\n\n&quot;I think he's wearing a costume to conceal his disfigurement.&quot;\n\n&quot;But he also confessed...&quot;\n\nAnd so on. It looks like Nathan and Ida are going to be conversing for a while...\n\nYou...\n\n[[Change the subject to John.|HalloweenPail]]\n\n[[Continue talking about Mar.|TalkMar]]\n\n&lt;&lt;if $metAndy is &quot;yes&quot;&gt;&gt;[[Say, &quot;I know who killed C.&quot;|Accuse]]&lt;&lt;endif&gt;&gt;</div><div tiddler="Misunderstanding" tags="" created="201409141352" modifier="twee" twine-position="2395,17">&quot;But of course, Inspector General, it would only make sense that you would think that,&quot; Detective Ida chuckles, sidestepping the body and inspecting you. She sniffs you and spins around.\n\n&quot;Just as I thought!&quot; she exclaims, thrusting her finger in the air. &quot;You're not from around here, are you?&quot;\n\n&quot;Wh-- uh, well, no,&quot; you stammer.\n\n&quot;Just spit it out already,&quot; Nathan says with a harrumph.\n\n&quot;Of course! I'm about to explain everything!&quot;\n\nJohn leans in to you and whispers, &quot;Shhh. She's about to explain everything!&quot;\n\nDetective Ida spins around with a flourish. &quot;I noticed when we first arrived that there was something odd about &lt;&lt;print $playerName&gt;&gt;'s dress. I noticed &lt;&lt;if $hasPants is &quot;no&quot;&gt;&gt;that, besides the obvious pantslessness &lt;&lt;endif&gt;&gt;he had an interesting...look about him.&quot;\n\n&quot;Judging from the fibers left behind on the bottom of the shoes, it seems that &lt;&lt;print $playerName&gt;&gt; was most recently in a &lt;&lt;if $dessertPlane is &quot;yes&quot;&gt;&gt;sugary desert made of cake.&lt;&lt;else&gt;&gt;dry, carpeted room.&lt;&lt;endif&gt;&gt; Nothing out of the ordinary, right? But...&quot;\n\nShe bends down to point at the letter C lying [[prone on the ground.|ClearedUp]]\n\n</div><div tiddler="Credits" tags="" created="201410021910" modifier="twee" twine-position="6712,317">Written and coded by Chelsea Hostetter (with help from Timothy Vaughan)\n\nMusic by Timothy Vaughan\n\nPlaytesting by Andrew Pinkham, Ida Mayer, Marc Davidson, Nathan Snyder, John Ly, Sarah Abraham\n\nThank you to everyone who helped with the game!\n\nAnd thank you &lt;&lt;print $playerName&gt;&gt; for playing. :)</div><div tiddler="TrySee" tags="" created="201409262102" modifier="twee" twine-position="2733,21">&quot;This is quite peculiar,&quot; you hear John say as he pokes the dead C with his finger. &quot;It looks as if he has been murdered by some kind of four-legged sitting implement,&quot; he muses.\n\nYou cross your arms. If you're going to get to &lt;&lt;print $partnerName&gt;&gt;, you have a feeling that you'll have to solve this mystery first.\n\nYou...\n\n[[Ask Doctor John if you can see the body.|CBody]]\n\n[[Converse with Detective Ida and Inspector General Nathan.|Conversation]]\n\n[[Wander downstream to see if you can find any clues.|DownTheRiver]]</div><div tiddler="Accuse" tags="" created="201410022102" modifier="twee" twine-position="3344,396">&quot;I know who killed C,&quot; you pipe up. Ida looks intrigued, as if she's about to let you in on a secret that she already knows. &quot;Oh? Who killed C, then?&quot;\n\n&quot;It was...\n\n&lt;&lt;if $metAndy is &quot;yes&quot;&gt;&gt;[[Andy, the strange man by the river.&quot;|AccuseAndy]]&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if $metMar is &quot;yes&quot;&gt;&gt;[[Mar, in the ghost costume.&quot;|AccuseMar]]&lt;&lt;endif&gt;&gt;\n\n[[...wait, I want to rethink this.|Rethink]]\n\n</div><div tiddler="TalktoAndrew" tags="" created="201408142108" modifier="twee" twine-position="2359,1707">You turn to Andrew.\n\n&quot;So, how did you get here?&quot; you start, trying to make sense of what's happening to you.\n\nHe looks at you as if you asked him whether he preferred vim or eMacs.\n\n&quot;Haven't you gotten lost before?&quot; he asks. You respond that of course you have, but you don't particularly like it.\n\n&quot;It's so much better to get lost with someone else than by yourself,&quot; he mutters. You think of &lt;&lt;print $partnerName&gt;&gt; and chew at your lip. You hope she's all right. She's probably all right.\n\n[[...right?|sillyAndrew]]</div><div tiddler="AdmireGulls" tags="" created="201408142108" modifier="twee" twine-position="2689,1542">The gulls in the river are watching the river's surface carefully for Swedish fish, which jump up into their waiting beaks at sporadic intervals.\n\nThe gulls' feathers sparkle in the sunlight, and you notice that when they sit too long in the river, they start to dissolve. They ruffle and wave in the breeze like the feathers you're used to, but something seems...different.\n\nYou start to think that the feathers are perhaps made of sugar.\n\nYou might be able to get some from [[catching a gull.|CatchGulls]]</div><div tiddler="Rethink" tags="" created="201410022108" modifier="twee" twine-position="3643,321">&quot;Wait, I need to rethink this,&quot; you mumble, scratching your nose.\n\n&quot;All right, take your time,&quot; Ida replies cheerfully. &quot;Let me know when you're ready.&quot;\n\nYou want to...\n\n[[Go back to your previous conversation.|Conversation]]\n\n[[Return to John and the body.|CBody]]\n\n[[Go downstream and check for clues.|DownTheRiver]]</div><div tiddler="Bracelet" tags="" created="201409270957" modifier="twee" twine-position="6132,292">She takes the materials from your hands and points the transmogrifier remote at them. With a crackling ZZZAP, they combine together to form a lovely copper bracelet, tied with leather straps and adorned with a turquoise rock.\n\n&lt;&lt;print $partnerName&gt;&gt; holds the bracelet in her hands. &quot;This represents us. Copper is malleable, and so are we. Leather is strong, and so are we. And the turquoise is beautiful, and so are we.&quot;\n\n&quot;&lt;&lt;print $playerName&gt;&gt;, you are incredible. You're smart, funny, sweet, and kind beyond measure. I thank each day that I have the opportunity to spend it with you.&quot;\n\n&quot;You made all of this...for me?&quot; you ask, looking around at her and your friends.\n\nThey nod.\n\n[[You blush.|Proposal]]</div><div tiddler="MeetAndy" tags="" created="201410022010" modifier="twee" twine-position="2812,613">&lt;&lt;silently&gt;&gt;&lt;&lt;set $metAndy = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You spin around to find an equally garish-looking man standing on the river bank. He is wearing a bright yellow cable sweater as pants, a dark plum waistcoat, and a blindingly blue tank top. Atop his head is what looks like a bedazzled porkpie hat with a dark feather sticking out of the top.\n\nHe reaches out a hand to shake yours, and when you do, you notice that your hand smells sweet.\n\n&quot;The name's Andy,&quot; he says, &quot;and I'm just as confused as you! Thought I'd take a walk here, and I see this strange raft... makes me mad, the kinda stuff people throw away on Halloween. I was just going to toss it. Want to help me?&quot;\n\n[[&quot;Sure!&quot;|ThrowAwayRaft]]\n\n[[&quot;Actually, I could use a raft like that...&quot;|KeepRaft]]</div><div tiddler="ReadyToGo" tags="" created="201407011731" modifier="twee" twine-position="878,290">As the two of you step into the space transmogrifier, it hums to life. &lt;&lt;print $partnerName&gt;&gt; nibbles on a carrot and presses some buttons on the remote she is holding.\n\n&quot;All right, *munch* let's rock and roll, &lt;&lt;print $playerName&gt;&gt;!&quot; she cackles through a mouthful of carrots.\n\nShe presses the green button and the transmogrifier [[begins to crackle.|Zap]]</div><div tiddler="CompletesMe" tags="" created="201410022122" modifier="twee" twine-position="3671,9">&lt;&lt;silently&gt;&gt;&lt;&lt;set $metMar = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;&quot;Why are you so sad?&quot; you ask the ghost. Mar wobbles as he talks.\n\n&quot;C used to complete me...&quot; he sighs. &quot;But now it's just me and my hips.&quot; You look at his hips. They are pretty nice, you guess?\n\nHe shakes his head. &quot;No, no, my hips!&quot;\n\n&quot;Uh, yes, your hips?&quot; you try to clarify.\n\n&quot;My omputer hips.&quot;\n\n&quot;Your what?&quot;\n\nHe sighs, looking morose. &quot;No, never mind... just take me in. I'd rather go to jail.&quot; He holds his hands out. &quot;I can't live without C!&quot;\n\n[[&quot;Wait, you killed C?&quot;|WaitaMinute]]</div><div tiddler="AndrewMutters" tags="" created="201409141313" modifier="twee" twine-position="1864,290">&lt;&lt;silently&gt;&gt;&lt;&lt;set $dessertPlane = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;&quot;Hey, Andrew.&quot; A voice crackles over Andrew's headphones and he looks up to you to see if you heard anything. Nope. You're looking out the window. Good.\n\n&quot;Is he ready?&quot; the voice asks.\n\n&quot;I think so. I'm taking him to the &lt;&lt;if $deadC is &quot;yes&quot;&gt;&gt;final trial&lt;&lt;else&gt;&gt;second trial&lt;&lt;endif&gt;&gt;.&quot;\n\n&quot;What's that?&quot; you ask, looking up.\n\n&quot;Oh nothing,&quot; Andrew laughs nervously. &quot;I'm just happy to fly again.&quot;\n\n&lt;&lt;if $deadC is &quot;yes&quot;&gt;&gt;[[The plane takes a right turn into the blue sky.|FinalTrialCrash]]\n&lt;&lt;else if $dessertPlane is &quot;yes&quot;&gt;&gt;\n[[The plane takes a left turn into the dark sky.|DeadCCrash]]\n&lt;&lt;endif&gt;&gt;</div><div tiddler="SongPart1" tags="" created="201409262105" modifier="twee" twine-position="4480,265">[[&quot;This day started off well enough / but before the end it really got away...&quot;|SongPart2]]\n\n[[&quot; I got out of bed this morning / I did not know what to expect today...&quot;|SongPart2]]\n\n[[&quot;My girlfriend woke me up early / Said she had something to show me that day...&quot;|SongPart2]]</div><div tiddler="SongPart3" tags="" created="201409262105" modifier="twee" twine-position="4781,265">&quot;Yeah, that's good! How does the next part go?&quot;\n\n[[&quot;...I found myself on a dessert plane / I felt off the rails like Crazy Train...&quot;|SongPart4]]\n\n[[&quot;...now I’m wearing my big boy pants / They are sticky but I have no fear of ants...&quot;|SongPart4]]\n\n[[&quot;...chased around some chocolate frogs / Who’d have known that peppermints would work as cogs...&quot;|SongPart4]]</div><div tiddler="DessertPlaneIntro" tags="" created="201407111714" modifier="twee" twine-position="1697,824">&lt;&lt;silently&gt;&gt;&lt;&lt;set $deadC = &quot;no&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;You press the ENGAGE button, and the transmogrifier crackles and sparks. You start to feel a tingly sensation weaving its way up your arms. The scenery of your lab begins to melt away.\n\nBefore you can check your skin for vagrant spiders, you hear the remote chime.\n\n&quot;Now arriving at the Desert Plain.&quot;\n\nYou look up.\n\nOkay, you definitely were expecting something a bit...different than this.\n\nIn front of you are not golden desert sands, nor tumbleweeds, nor vast blue sky...but a plane.\n\nMade out of cake.\n\nIt's a [[dessert plane.|WTFPlane]]</div><div tiddler="EndDeadC" tags="" created="201410042232" modifier="twee" twine-position="3843,848">&lt;&lt;silently&gt;&gt;&lt;&lt;set $deadC = &quot;yes&quot;&gt;&gt;&lt;&lt;endsilently&gt;&gt;It is not long until you locate Andy and have him arrested; he is glaring daggers at you as he is whisked away into the newly-transformed police cab.\n\nNo longer is there a raft; you see lying in the river remnants of some crafting supplies and a large, black crow.\n\nDetective Ida is excitedly pacing with Doctor John in tow filling in details.\n\n&quot;Brilliant! It would make sense that this murder occurred on Halloween, for Andy's real identity is...&quot;\n\nDoctor John holds up the pail. &quot;It appears that he was in fact, a piece of candy. The only thing in his way from being something consumed on Halloween to a human being was one pesky letter C...&quot;\n\n&quot;Exactly, John! And to mask his murder, he was banking on the fact that anything with the letter C would become immutably changed. Thus, he murdered the C with a chair...&quot;\n\n&quot;And it became hair once the C was dead.&quot;\n\nAs you watch Ida and John in their jubilations, you feel a hand on your shoulder.It's Inspector General Nathan. He looks relieved. &quot;I...underestimated you, &lt;&lt;print $playerName&gt;&gt;. You're great to have you as a fellow investigator, and I think I know why you're here.&quot;\n\n&quot;You do?&quot;\n\n&quot;You're looking for someone, right? I can [[help you out.|Transition]]&quot;</div><div tiddler="DownTheRiver" tags="" created="201410021957" modifier="twee" twine-position="2644,392">Maybe you can find some clues downstream. Or would they call them &quot;lues?&quot; You start to think that this might be more difficult than you might think...\n\nYou slog through the boggy river, stopping only to shake frogs out of your shoes. &lt;&lt;if $hasPants is &quot;yes&quot;&gt;&gt;You're happy you brought your pants. Otherwise, this mucky water would be a little bit more...uncomfortable. &lt;&lt;else&gt;&gt;You didn't even know frogs could get in there. You grumble and cover yourself, trying to avoid the murky water.&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if $metAndy is &quot;yes&quot;&gt;&gt;&quot;Hey buddy!&quot; Andy shouts from the river bank.\n\nYou greet Andy by...\n\n[[Asking him what he's doing here.|WhatDo]]\n\n[[Asking him what he is for Halloween.|HalloweenRant]]&lt;&lt;else&gt;&gt;After a fair trek, you see a bright-colored piece of plastic caught on some reeds. Upon closer inspection, you find that it is a raft with a rowing paddle. The raft looks like it has been patched together like a quilt. The garish, colorful patterns on the raft hurt your eyes.\n\n&quot;Amazing what people will throw away on Halloween, huh?&quot; a voice says from behind you.\n\n[[You spin around.|MeetAndy]]&lt;&lt;endif&gt;&gt;</div><div tiddler="OuterPlane" tags="" created="201408142101" modifier="twee" twine-position="2270,1312">&lt;&lt;if $icedPlane is &quot;yes&quot;&gt;&gt;That is one sweet-looking plane. Literally. It's covered in homemade chocolate icing and looks scrumptious. Andrew licks his lips unabashedly.&lt;&lt;else&gt;&gt;You are currently outside the plane. Andrew is with you.\n\nYou check your pack; you have &lt;&lt;if $hasChocolate is &quot;yes&quot;&gt;&gt;some baking chocolate&lt;&lt;if $hasSugar is &quot;yes&quot;&gt;&gt; and a sugar gull feather&lt;&lt;endif&gt;&gt;&lt;&lt;if $hasCream is &quot;yes&quot;&gt;&gt; and heavy cream&lt;&lt;endif&gt;&gt;&lt;&lt;else&gt;&gt;nothing in your pack&lt;&lt;endif&gt;&gt;. &lt;&lt;if $hasCream is &quot;yes&quot;&gt;&gt;It looks like you have all of the ingredients to make icing. Do you want to [[ice the plane?|iceThePlane]] &lt;&lt;else&gt;&gt;You're going to need to find some icing around here. Or maybe just the stuff to make icing?&lt;&lt;endif&gt;&gt;&lt;&lt;endif&gt;&gt;\n\nYou look up at the plane. Maybe it would be a good idea to...\n\n[[Check out the cakepit.|LookAtCakepit]]\n\n[[Go to the chocolate river.|ChocoRiver]]\n\n[[Take a look at the bubbling cream spring.|CreamSpring]]</div><div tiddler="WTFPlane" tags="" created="201407111720" modifier="twee" twine-position="1861,834">It takes a few minutes for the pun to sink in.\n\nThe plane itself is pretty impressive; it is towering above you and smells delicious. The cake that it is made of is marbled. You're not close enough to poke it, but you're pretty sure if you did, it would be soft and spongy.\n\nSticking out of the plane's body in the form of wings are two gigantic chocolate biscotti. The wheels on the ground are hard caramels, and the windows are different colored Jolly Ranchers.\n\nTo the left of you is a ladder made of cake pops leading up to the cockpit.\n\nAll of this space travel has made you a bit peckish. You walk up to the plane and...\n\n[[Lick one of the caramel wheels.| HeyYou]]\n\n[[Take a bite of the cake pop ladder.| HeyYou]]</div><div tiddler="Confusion" tags="" created="201407051226" modifier="twee" twine-position="1028,9">&quot;&lt;&lt;print $partnerName&gt;&gt;?&quot; you ask tremulously, looking around at the space where she once was.\n\n&quot;&lt;&lt;print $partnerName&gt;&gt;!?&quot;\n\nYour voice grows more panicked. She's gone. She might be anywhere, but she's not here.\n\nYou look around wildly, trying to calm yourself. You know how this transmogrifier works too -- maybe you can figure out where she went.\n\nYou pick up the remote from the floor. It has the buttons &quot;ENGAGE, RETURN and RANDOM&quot; on the face.\n\nYou [[try to press the ENGAGE button.|NoGo]]</div><div tiddler="FinalTrialCrash" tags="" created="201409141322" modifier="twee" twine-position="4137,267">The plane coasts to a stop on a great plateau, bumping across rocks and shrubs.\n\nOnce it coasts to a halt, Andrew takes a look at his map. &quot;Hmmm... it says here that we're close to the Sentimental Rock,&quot; he muses, looking out of the window.\n\nYou spot a small cottage on the edge of the plateau. \n\nAndew lets down the cake pop ladder and clambers down, instructing you to follow. You do, and see a figure standing outside of the small cottage.\n\nIt looks like...\n\n&quot;Tim!&quot; you shout, waving to him. He waves back, inviting you and Andrew into the house.\n\n&quot;What's going on? Where's &lt;&lt;print $partnerName&gt;&gt;?&quot; you inquire. Tim gives you a hug.\n\n&quot;Don't worry, &lt;&lt;print $partnerName&gt;&gt; has been waiting for you.&quot; he responds. &quot;Let's jam a little while we wait, huh?&quot;\n\n[[Tim picks up the guitar.|RockShelfIntro]]</div><div tiddler="BringPants" tags="" created="201407011726" modifier="twee" twine-position="766,150">&lt;&lt;silently&gt;&gt;\n&lt;&lt;set $hasPants = &quot;yes&quot;&gt;&gt;\n&lt;&lt;endsilently&gt;&gt;Yeah, you should probably put on pants.\n\nYou step into your finest adventuring outfit and take &lt;&lt;print $partnerName&gt;&gt;'s hand.\n\nYou respond, [[&quot;Okay, now I'm ready.&quot;|ReadyToGo]]</div></div></body></html>
